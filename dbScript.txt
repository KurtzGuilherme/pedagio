CREATE TABLE TOLL_PASSAGE (
    ID UNIQUEIDENTIFIER PRIMARY KEY,
    PASSAGE_DATETIME DATETIME NOT NULL,
    PLAZA_NAME VARCHAR(100) NOT NULL,
    CITY VARCHAR(100) NOT NULL,
    STATE CHAR(2) NOT NULL,
    AMOUNT_PAID DECIMAL(10, 2) NOT NULL,
    VEHICLE_TYPE INT NOT NULL
);

CREATE TABLE PROCESS_REPORT (
    ID UNIQUEIDENTIFIER PRIMARY KEY,
    CREATION_DATE DATETIME2 NOT NULL,
    DATA NVARCHAR(MAX) NOT NULL,
	REPORT_TYPE INT NOT NULL
);


-- Índice para consultas por praça de pedágio
CREATE NONCLUSTERED INDEX IX_TOLL_PLAZA_NAME
ON TOLL_PASSAGE (PLAZA_NAME)
INCLUDE (AMOUNT_PAID, VEHICLE_TYPE);

-- Índice para consultas por data/hora
CREATE NONCLUSTERED INDEX IX_TOLL_PASSAGE_DATETIME
ON TOLL_PASSAGE (PASSAGE_DATETIME)
INCLUDE (PLAZA_NAME, CITY, AMOUNT_PAID, VEHICLE_TYPE);

-- Índice composto para consultas por cidade/estado
CREATE NONCLUSTERED INDEX IX_TOLL_CITY_STATE
ON TOLL_PASSAGE (CITY, STATE)
INCLUDE (PASSAGE_DATETIME, AMOUNT_PAID);

-- Índice para consultas por tipo de veículo
CREATE NONCLUSTERED INDEX IX_TOLL_VEHICLE_TYPE
ON TOLL_PASSAGE (VEHICLE_TYPE)
INCLUDE (PLAZA_NAME, PASSAGE_DATETIME);

-- Índice para consultas por tipo de relatorio
CREATE NONCLUSTERED INDEX IX_PROCESS_REPORT_REPORT_TYPE
ON PROCESS_REPORT (REPORT_TYPE)
INCLUDE (CREATION_DATE);